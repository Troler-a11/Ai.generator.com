<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HARD_CASINO | VIP TERMINAL</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        :root { --accent: #00ff88; --bg: #050505; --panel: #121214; --gold: #ffd700; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden; }

        /* –ï–∫—Ä–∞–Ω–∏ */
        .screen { position: fixed; inset: 0; background: var(--bg); z-index: 100; display: none; flex-direction: column; padding: 20px; box-sizing: border-box; }
        .screen.active { display: flex; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* –ü—Ä–æ—Ñ—ñ–ª—å (–ö—Ä—É–≥–ª–∞ –∫–Ω–æ–ø–∫–∞) */
        .profile-trigger { position: fixed; top: 20px; right: 20px; width: 60px; height: 60px; background: var(--panel); border: 2px solid var(--accent); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 50; box-shadow: 0 0 15px var(--accent); font-size: 28px; }

        /* –ö–∞—Ä—Ç–∏ */
        .cards-wrap { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 20px; }
        .card-slot { height: 100px; background: #222; border-radius: 10px; border: 2px solid #333; cursor: pointer; transition: 0.2s; display: flex; align-items: center; justify-content: center; font-size: 24px; }
        .card-slot.selected { border-color: var(--accent); box-shadow: 0 0 15px var(--accent); }
        .card-slot.shuffling { border-color: var(--gold); background: #333; }

        /* –ü–æ–ª—è —Ç–∞ –∫–Ω–æ–ø–∫–∏ */
        input { padding: 15px; background: #000; border: 1px solid #333; color: white; border-radius: 12px; font-size: 16px; margin-bottom: 10px; width: 100%; box-sizing: border-box; }
        .btn { background: var(--accent); color: black; padding: 16px; border: none; border-radius: 12px; font-weight: 900; cursor: pointer; text-transform: uppercase; width: 100%; margin-top: 10px; }
        
        .close-x { position: absolute; top: 20px; left: 20px; font-size: 30px; cursor: pointer; color: #555; }
        .hk-display { color: var(--gold); font-weight: bold; font-size: 24px; text-align: center; margin: 20px 0; }

        #big-result { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 2000; display: none; align-items: center; justify-content: center; flex-direction: column; }
        .final-card { width: 220px; height: 320px; background: #fff; color: #000; border-radius: 20px; display: flex; align-items: center; justify-content: center; font-size: 60px; font-weight: 900; box-shadow: 0 0 50px var(--accent); animation: cardPop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes cardPop { from { transform: scale(0.5) rotateY(90deg); } to { transform: scale(1) rotateY(0); } }
    </style>
</head>
<body>

    <div class="profile-trigger" id="prof-btn" style="display:none;" onclick="showScreen('scr-profile')">üë§</div>

    <div id="scr-auth" class="screen active">
        <div style="max-width:400px; margin:auto; width:100%;">
            <h1 style="text-align:center;">HARD_CASINO</h1>
            <input type="text" id="reg-fio" placeholder="–ü–Ü–ë">
            <input type="email" id="reg-email" placeholder="Email">
            <input type="password" id="reg-pass" placeholder="–ü–∞—Ä–æ–ª—å (12+ —Ü–∏—Ñ—Ä)">
            <button class="btn" onclick="handleAuth()">–ó–ê–†–ï–Ñ–°–¢–†–£–í–ê–¢–ò–°–Ø</button>
        </div>
    </div>

    <div id="scr-verify" class="screen">
        <div style="max-width:400px; margin:auto; width:100%; text-align:center;">
            <h2>–í–í–ï–î–Ü–¢–¨ –ö–û–î</h2>
            <p>–õ–∏—Å—Ç –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—é –º–æ–≤–æ—é –Ω–∞ –≤–∞—à—É –ø–æ—à—Ç—É.</p>
            <input type="number" id="v-code" placeholder="____">
            <button class="btn" onclick="verifyAccount()">–ü–Ü–î–¢–í–ï–†–î–ò–¢–ò</button>
        </div>
    </div>

    <div id="scr-lobby" class="screen">
        <h2 style="text-align:center; letter-spacing:3px;">GAMES_POOL</h2>
        <div class="hk-display"><span id="lobby-hk">0</span> HK</div>
        <button class="btn" style="height:120px; margin-bottom:15px;" onclick="startCardsUI()">üÉè ELITE CARDS (x4.0)</button>
        <button class="btn" style="height:120px; background:var(--gold);" onclick="startDiceUI()">üé≤ CYBER DICE (x1.15)</button>
    </div>

    <div id="scr-profile" class="screen">
        <div class="close-x" onclick="hideScreens()">√ó</div>
        <center>
            <div style="width:100px; height:100px; border:3px solid var(--accent); border-radius:50%; font-size:50px; line-height:100px; margin-top:50px;">üë§</div>
            <h2 id="p-name">Username</h2>
            <p id="p-id" style="color:#444;">ID: #000000</p>
            <div class="hk-display"><span id="p-hk">0</span> HK</div>
            <hr style="border:0.5px solid #222; margin:20px 0;">
            <p>–ü–û–ü–û–í–ù–ò–¢–ò (4874 1000 8549 0699)</p>
            <button class="btn" onclick="window.open('https://t.me/pingvin4ikpororo')">–í–ò–í–ï–°–¢–ò (TELEGRAM)</button>
        </center>
    </div>

    <div id="scr-game-cards" class="screen">
        <div class="close-x" onclick="hideScreens()">√ó</div>
        <h3 style="text-align:center;">–û–ë–ï–†–Ü–¢–¨ –°–í–û–Æ –ö–ê–†–¢–£</h3>
        <div class="cards-wrap" id="cards-grid"></div>
        <div style="margin-top:30px;">
            <input type="number" id="bet-cards" placeholder="–°—É–º–∞ —Å—Ç–∞–≤–∫–∏ (–º—ñ–Ω. 50)">
            <button class="btn" onclick="playCards()">–ì–†–ê–¢–ò</button>
        </div>
    </div>

    <div id="big-result">
        <div class="final-card" id="card-val">?</div>
        <h1 id="win-text" style="margin-top:30px;"></h1>
        <button class="btn" style="width:200px;" onclick="document.getElementById('big-result').style.display='none'">–î–ê–õ–Ü</button>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
        import { getDatabase, ref, set, onValue, update } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyD3BQTZeCp74owFliqECbUgufJ3UC6dFC8",
            authDomain: "vip-shop-a2ec4.firebaseapp.com",
            projectId: "vip-shop-a2ec4",
            databaseURL: "https://vip-shop-a2ec4-default-rtdb.firebaseio.com",
            appId: "1:429877342673:web:bf2fbcddd5f3ba04c670f0"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        let user = null;
        let authCode = null;

        emailjs.init("YOUR_PUBLIC_KEY"); // –í–°–¢–ê–í –°–í–Ü–ô PUBLIC KEY

        window.handleAuth = () => {
            const fio = document.getElementById('reg-fio').value;
            const email = document.getElementById('reg-email').value;
            const pass = document.getElementById('reg-pass').value;

            if(pass.length < 12) return alert("–ü–∞—Ä–æ–ª—å –º–∞—î –±—É—Ç–∏ 12+ —Ü–∏—Ñ—Ä!");
            
            authCode = Math.floor(1000 + Math.random() * 9000);
            
            emailjs.send("service_dbkrnz9", "YOUR_TEMPLATE_ID", {
                user_name: fio,
                user_email: email,
                auth_code: authCode
            }).then(() => {
                showScreen('scr-verify');
            }).catch(err => alert("–ü–æ–º–∏–ª–∫–∞ –ø–æ—à—Ç–∏: " + err));
        };

        window.verifyAccount = () => {
            if(document.getElementById('v-code').value == authCode) {
                const uid = "ID" + Math.floor(100000 + Math.random() * 899999);
                const data = { name: document.getElementById('reg-fio').value, email: document.getElementById('reg-email').value, hk: 500, id: uid };
                set(ref(db, 'players/' + uid), data);
                localStorage.setItem('casino_uid', uid);
                location.reload();
            } else alert("–ù–µ–≤—ñ—Ä–Ω–∏–π –∫–æ–¥!");
        };

        // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é
        const localUid = localStorage.getItem('casino_uid');
        if(localUid) {
            document.getElementById('scr-auth').classList.remove('active');
            document.getElementById('prof-btn').style.display = 'flex';
            showScreen('scr-lobby');
            onValue(ref(db, 'players/' + localUid), (s) => {
                user = s.val();
                if(user) {
                    document.getElementById('lobby-hk').innerText = user.hk;
                    document.getElementById('p-hk').innerText = user.hk;
                    document.getElementById('p-name').innerText = user.name;
                    document.getElementById('p-id').innerText = "ID: " + user.id;
                }
            });
        }

        // –Ü–ì–†–ò
        window.startCardsUI = () => {
            showScreen('scr-game-cards');
            const grid = document.getElementById('cards-grid');
            grid.innerHTML = '';
            for(let i=0; i<20; i++) {
                const s = document.createElement('div');
                s.className = 'card-slot';
                s.innerText = '?';
                s.onclick = () => {
                    document.querySelectorAll('.card-slot').forEach(c=>c.classList.remove('selected'));
                    s.classList.add('selected');
                    s.dataset.idx = i;
                };
                grid.appendChild(s);
            }
        };

        window.playCards = async () => {
            const bet = parseInt(document.getElementById('bet-cards').value);
            const sel = document.querySelector('.card-slot.selected');
            if(!sel || bet < 50 || bet > user.hk) return alert("–û–±–µ—Ä—ñ—Ç—å –∫–∞—Ä—Ç—É —Ç–∞ —Å—É–º—É (–º—ñ–Ω. 50)!");

            update(ref(db, 'players/' + user.id), { hk: user.hk - bet });

            const slots = document.querySelectorAll('.card-slot');
            for(let i=0; i<20; i++) {
                let r = Math.floor(Math.random()*20);
                slots[r].classList.add('shuffling');
                await new Promise(res => setTimeout(res, 100));
                slots[r].classList.remove('shuffling');
            }

            const winChance = 0.0000005;
            const isWin = Math.random() < winChance;
            const symbols = ['A‚ô†', 'K‚ô¶', 'Q‚ô•', 'J‚ô£', '10‚ô†'];
            const resSym = symbols[Math.floor(Math.random()*symbols.length)];

            document.getElementById('card-val').innerText = resSym;
            document.getElementById('win-text').innerText = isWin ? "YOU WIN!" : "YOU LOSE";
            document.getElementById('win-text').style.color = isWin ? "var(--accent)" : "red";
            document.getElementById('big-result').style.display = 'flex';

            if(isWin) update(ref(db, 'players/' + user.id), { hk: user.hk + (bet * 4) });
        };

        window.showScreen = (id) => { hideScreens(); document.getElementById(id).classList.add('active'); };
        window.hideScreens = () => { 
            document.querySelectorAll('.screen').forEach(s => {
                if(s.id !== 'scr-auth' && s.id !== 'scr-verify') s.classList.remove('active');
            });
            document.getElementById('scr-lobby').classList.add('active');
        };

    </script>
</body>
</html>
